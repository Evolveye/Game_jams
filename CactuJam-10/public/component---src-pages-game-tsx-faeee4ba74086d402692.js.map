{"version":3,"file":"component---src-pages-game-tsx-faeee4ba74086d402692.js","mappings":"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","sources":["webpack://cactu-jam-10/./src/core/functions/composePage.tsx","webpack://cactu-jam-10/./src/core/layouts/main.tsx","webpack://cactu-jam-10/./src/components/game/game.module.css","webpack://cactu-jam-10/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","webpack://cactu-jam-10/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","webpack://cactu-jam-10/./src/core/functions/getWindow.ts","webpack://cactu-jam-10/./src/components/game/logic/Painter.ts","webpack://cactu-jam-10/./src/components/game/img/gift.png","webpack://cactu-jam-10/./src/components/game/logic/Keys.ts","webpack://cactu-jam-10/./src/components/game/logic/Sprite.ts","webpack://cactu-jam-10/./src/components/game/logic/Entity.ts","webpack://cactu-jam-10/./src/components/game/logic/entities/Gift.ts","webpack://cactu-jam-10/./src/components/game/img/house.png","webpack://cactu-jam-10/./src/components/game/logic/entities/House.tsx","webpack://cactu-jam-10/./src/components/game/img/path.png","webpack://cactu-jam-10/./src/components/game/img/path-1.png","webpack://cactu-jam-10/./src/components/game/img/path-2.png","webpack://cactu-jam-10/./src/components/game/logic/entities/Path.ts","webpack://cactu-jam-10/./src/components/game/img/santa.png","webpack://cactu-jam-10/./src/components/game/logic/Inventory.ts","webpack://cactu-jam-10/./src/components/game/logic/LevelCell.ts","webpack://cactu-jam-10/./src/components/game/logic/MovingEntity.ts","webpack://cactu-jam-10/./src/components/game/logic/entities/Player.ts","webpack://cactu-jam-10/./src/components/game/img/frost.png","webpack://cactu-jam-10/./src/components/game/logic/Level.ts","webpack://cactu-jam-10/./src/components/game/logic/levels/1.ts","webpack://cactu-jam-10/./src/components/game/logic/Game.ts","webpack://cactu-jam-10/./src/components/game/ui/Inventory.tsx","webpack://cactu-jam-10/./src/components/game/ui/index.tsx","webpack://cactu-jam-10/./src/components/game/index.tsx","webpack://cactu-jam-10/./src/pages/game.tsx"],"sourcesContent":["import React from \"react\"\r\n\r\nexport default function composePage({ component:Component, layout:Layout }) {\r\n  return () => <Layout><Component /></Layout>\r\n}\r\n","import \"../styles/normalize.css\"\r\nimport \"../styles/main.css\"\r\n\r\nexport default function MainLayout({ children }) {\r\n  return (\r\n    children\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport var game = \"game-module--game--7256c\";\nexport var mainCanvas = \"game-module--mainCanvas--c69a1\";","function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };","var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };","export default function getWindow() {\r\n  return typeof window === `undefined` ? null : window\r\n}\r\n","import getWindow from \"../../../core/functions/getWindow\"\r\nimport Level from \"./Level\"\r\n\r\nexport enum Mode {\r\n  CENTER = `center`,\r\n}\r\n\r\nexport type DrawLevelOptions = {\r\n  mode?: Mode\r\n  tileSize?: number\r\n}\r\n\r\nexport default class Painter {\r\n  static Mode = Mode\r\n\r\n\r\n  #ctxs:CanvasRenderingContext2D[] = []\r\n  #entitiesCtx:CanvasRenderingContext2D\r\n\r\n\r\n  constructor() {\r\n    getWindow()?.addEventListener( `resize`, this.#resize )\r\n  }\r\n\r\n\r\n  setCanvas = (canvas:HTMLCanvasElement, layer = 0) => {\r\n    this.#ctxs[ layer ] = canvas.getContext( `2d` )\r\n\r\n    this.#resize()\r\n  }\r\n\r\n\r\n  #getEntitiesCtx = () => this.#ctxs[ this.#ctxs.length - 1 ]\r\n  #getBestCtx = layer => this.#ctxs.length > layer ? this.#ctxs[ layer ] : this.#ctxs[ this.#ctxs.length - 1 ]\r\n\r\n\r\n\r\n  #resize = () => {\r\n    this.#ctxs.forEach( ctx => {\r\n      const { canvas } = ctx\r\n\r\n      canvas.width = canvas.clientWidth\r\n      canvas.height = canvas.clientHeight\r\n    } )\r\n  }\r\n\r\n\r\n  clear( ctx:CanvasRenderingContext2D = null ) {\r\n    const clearer = ctx => {\r\n      const { width, height } = ctx.canvas\r\n\r\n      ctx.clearRect( 0, 0, width, height )\r\n    }\r\n\r\n    if (ctx) clearer( ctx )\r\n    else this.#ctxs.forEach( clearer )\r\n  }\r\n\r\n\r\n  drawLevel( level:Level, { mode = Mode.CENTER, tileSize = 32 }:DrawLevelOptions = {} ) {\r\n    const ctxs = this.#ctxs\r\n    const eCtx = this.#getEntitiesCtx()\r\n\r\n    this.clear()\r\n\r\n    ctxs.forEach( ctx => {\r\n      ctx.save()\r\n\r\n      if (mode === Mode.CENTER) {\r\n        ctx.translate( (ctx.canvas.width - level.width * tileSize) / 2, (ctx.canvas.height - level.height * tileSize) / 2 )\r\n      }\r\n    } )\r\n\r\n    level.forEach( cell => cell.forEach( (tile, layer) => tile?.draw( this.#getBestCtx( layer ), tileSize ) ) )\r\n    level.entities.forEach( e => e.draw( eCtx, tileSize ) )\r\n\r\n    ctxs.forEach( ctx => ctx.restore() )\r\n  }\r\n\r\n\r\n  destroy = () => {\r\n    getWindow()?.removeEventListener( `resize`, this.#resize )\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAASElEQVQoU2OUTmT4z0AkYAQpFvdiQVH+ctsfBmxipClOZGD4343mjFIGBgZsYowkKybSfwykm0w7NxNtMshzoBAh5Mn5DAyMACdJKB0tutaFAAAAAElFTkSuQmCC\"","import getWindow from \"../../../core/functions/getWindow\"\r\n\r\nexport type KeyBindValue = { code:string, result:string }\r\nexport type SimplifiedKeyBinds = Record<string, (KeyBindValue | string)[]>\r\nexport type KeyBinds = Record<string, KeyBindValue[]>\r\nexport type KeyState = { code:string, active:boolean, updatedAt:number }\r\n\r\nexport default class Keys {\r\n  static #data:Record<string, KeyState> = {}\r\n  static predefinedBinds:SimplifiedKeyBinds = {\r\n    controls: [\r\n      { code:`KeyW`,  result:`up` },    { code:`ArrowUp`,     result:`up` },\r\n      { code:`KeyD`,  result:`right` }, { code:`ArrowRight`,  result:`right` },\r\n      { code:`KeyS`,  result:`down` },  { code:`ArrowDown`,   result:`down` },\r\n      { code:`KeyA`,  result:`left` },  { code:`ArrowLeft`,   result:`left` },\r\n    ],\r\n    leftDirection: [ `KeyA`, `ArrowLeft` ],\r\n    rightDirection: [ `KeyD`, `ArrowRight` ],\r\n    upDirection: [ `KeyW`, `ArrowUp` ],\r\n    downDirection: [ `KeyS`, `ArrowDown` ],\r\n  }\r\n\r\n  #timeOfusedKeys:Record<string, number> = {}\r\n\r\n  binds:KeyBinds\r\n\r\n\r\n  constructor( binds:SimplifiedKeyBinds = {} ) {\r\n    const notSimplifiedBinds = {}\r\n    const concatenatedBinds = { ...Keys.predefinedBinds, ...binds }\r\n\r\n    for (const bindName in concatenatedBinds) {\r\n      notSimplifiedBinds[ bindName ] = concatenatedBinds[ bindName ].map( b => typeof b === `object` ? b : { code:b, result:true } )\r\n    }\r\n\r\n    this.binds = notSimplifiedBinds\r\n  }\r\n\r\n\r\n  is( code:string ):boolean {\r\n    return Keys.is( code, this.binds ).active\r\n  }\r\n\r\n  isOnce( code:string ):boolean {\r\n    const times = this.#timeOfusedKeys\r\n    const { active, updatedAt } = Keys.is( code, this.binds )\r\n\r\n    if (code in times && times[ code ] === updatedAt) return false\r\n    if (!active) return false\r\n\r\n    this.#timeOfusedKeys[ code ] = updatedAt\r\n\r\n    return true\r\n  }\r\n\r\n\r\n  static is = (code:string, binds:KeyBinds = {}):KeyState => {\r\n    const data = this.#data\r\n\r\n    if (/^[a-z]$/i.test( code )) code = `Key${code.toUpperCase()}`\r\n    else if (/^[0-9]$/.test( code )) code = `Digit${code}`\r\n    else if ([ `up`, `right`, `down`, `left` ].includes( code )) code = `Arrow${code.charAt( 0 ).toUpperCase() + code.slice( 1 )}`\r\n    else if (code === `shift`) code = `ShiftLeft`\r\n\r\n    let state = data[ code ]\r\n\r\n    if (!state && code in binds) {\r\n      const bind = binds[ code ].find( ({ code }) => data[ code ]?.active )\r\n\r\n      if (bind) {\r\n        const stateFromBind = data[ bind.code ]\r\n\r\n        state = { ...stateFromBind, code:bind.code }\r\n      }\r\n    }\r\n\r\n    return state ?? { code, active:false, updatedAt:0 }\r\n  }\r\n\r\n\r\n  static onKeyDown = ({ code }:KeyboardEvent) => {\r\n    if (this.#data[ code ]?.active) return\r\n\r\n    this.#data[ code ] = { code, active:true, updatedAt:Date.now() }\r\n  }\r\n\r\n\r\n  static onKeyUp = ({ code }:KeyboardEvent) => {\r\n    this.#data[ code ] = { code, active:false, updatedAt:Date.now() }\r\n  }\r\n}\r\n\r\ngetWindow()?.addEventListener( `keydown`, Keys.onKeyDown )\r\ngetWindow()?.addEventListener( `keyup`, Keys.onKeyUp )\r\n","export default class Sprite {\r\n  #framesCount:number\r\n  #framesPerRow:number\r\n  #framesPerColumn:number\r\n  #spreadsheet:HTMLImageElement\r\n  #currentFrame:number = 0\r\n  #frameWidth:number\r\n  #frameheight:number\r\n\r\n\r\n  constructor( src:string, framesPerRow = 1, framesPerColumn = 1, framesCount = framesPerRow * framesPerColumn ) {\r\n    if (typeof Image === `undefined`) return\r\n\r\n    this.#spreadsheet = new Image()\r\n    this.#spreadsheet.src = src\r\n\r\n    this.#framesPerRow = framesPerRow\r\n    this.#framesPerColumn = framesPerColumn\r\n    this.#framesCount = framesCount\r\n\r\n    this.#spreadsheet.addEventListener( `load`, () => {\r\n      this.#frameWidth = this.#spreadsheet.width / this.#framesPerRow\r\n      this.#frameheight = this.#spreadsheet.height / this.#framesPerColumn\r\n      this.#currentFrame = 0\r\n    } )\r\n  }\r\n\r\n\r\n  getWidth = () => this.#spreadsheet.width / this.#framesPerRow\r\n  getHeight = () => this.#spreadsheet.height / this.#framesPerColumn\r\n\r\n\r\n  nextFrame = () => {\r\n    if (this.#currentFrame < this.#framesCount - 1) this.#currentFrame++\r\n    else this.#currentFrame = 0\r\n  }\r\n\r\n\r\n  draw = (ctx:CanvasRenderingContext2D, x:number, y:number, width?:number, height?:number) => {\r\n    const sprite = this.#spreadsheet\r\n    const frameW = this.#frameWidth\r\n    const frameH = this.#frameheight\r\n    const frameX = this.#currentFrame % this.#framesPerRow * frameW\r\n    const frameY = Math.floor( this.#currentFrame / this.#framesPerRow ) * frameH\r\n\r\n    if (!width) width = sprite.width\r\n    if (!height) height = sprite.height\r\n\r\n    ctx.drawImage(\r\n      sprite,\r\n      frameX, frameY, frameW, frameH,\r\n      x, y, width, height,\r\n    )\r\n  }\r\n}\r\n","import Keys, { SimplifiedKeyBinds } from \"./Keys\"\r\nimport Sprite from \"./Sprite\"\r\nimport Level from \"./Level\"\r\n\r\nexport type EntityConfig = {\r\n  labels?: string []\r\n  spriteSrc?: string\r\n  framesPerRow?: number\r\n  framesPerColumn?: number\r\n  framesCount?: number\r\n  keyBinds?: SimplifiedKeyBinds\r\n  size?: number\r\n}\r\n\r\nexport default class Entity {\r\n  #sprite:Sprite\r\n  #world:Level\r\n\r\n  labels:string[]\r\n  keys:Keys\r\n  angle:number\r\n  x:number\r\n  y:number\r\n  w:number\r\n  h:number\r\n\r\n\r\n  constructor( x:number, y:number, { labels, size = 1, keyBinds, spriteSrc, framesPerRow, framesPerColumn, framesCount }:EntityConfig = {} ) {\r\n    this.labels = labels\r\n    this.keys = new Keys(keyBinds)\r\n    this.#sprite = !spriteSrc ? null : new Sprite( spriteSrc, framesPerRow, framesPerColumn, framesCount )\r\n    this.x = x\r\n    this.y = y\r\n    this.w = size\r\n    this.h = size\r\n  }\r\n\r\n\r\n  setAngle = (angle:number) => this.angle = Math.PI / 180 * angle\r\n  setExistingWorld = (world:Level) => this.#world = world\r\n  setSize( width, height = width ) {\r\n    this.w = width\r\n    this.h = height\r\n  }\r\n\r\n\r\n  isKey = (code:string) => this.keys.is( code )\r\n  isKeyOnce = (code:string) => this.keys.isOnce( code )\r\n\r\n\r\n  getWorld = () => this.#world\r\n  getTilePos = (x = this.x, y = this.y) => {\r\n    return {\r\n      x: Math.floor( x + this.w / 2 ),\r\n      y: Math.floor( y + this.h / 2 ),\r\n    }\r\n  }\r\n  getThingImOn = () => {\r\n    const pos = this.getTilePos()\r\n    return this.#world?.getCell( pos.x, pos.y )?.top()\r\n  }\r\n\r\n\r\n  nextFrame = () => this.#sprite.nextFrame()\r\n  draw = (ctx:CanvasRenderingContext2D, tileSize:number, x:number = this.x, y:number = this.y, width:number = this.w, height:number = this.h) => {\r\n    const widthOnTile = width * tileSize\r\n    const heightOnTile = height * tileSize\r\n    const halfW = widthOnTile / 2\r\n    const halfH = heightOnTile / 2\r\n\r\n    ctx.save()\r\n    ctx.translate( (x + 0.5) * tileSize, (y + 0.5) * tileSize )\r\n    ctx.rotate( -this.angle )\r\n\r\n    this.#sprite?.draw( ctx, -halfW, -halfH, widthOnTile, heightOnTile )\r\n\r\n    ctx.restore()\r\n  }\r\n\r\n  tick = (tFrame:number):void => { tFrame }\r\n}\r\n","import giftSrc from \"../../img/gift.png\"\r\nimport Entity from \"../Entity\"\r\n\r\nexport type PathConfig = {\r\n  size?: number\r\n}\r\n\r\nexport default class Gift extends Entity {\r\n  constructor( x:number, y:number, { size = 0.5 }:PathConfig = {} ) {\r\n    super( x, y, { size, spriteSrc:giftSrc } )\r\n  }\r\n\r\n  tick = () => {}\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABEFJREFUWEe9V81LVFEUPzNqo6O+MVFmhEFBg8pVQtLGheVOhBgiQog2IeHf0F/gukW0iKiNUAsNRFeagYvAxJ0f4QeGMsqYzTxpZrT0xe8453rfnfdGJenAcN+7H+f8zu983DcB8hanMB0ojOa7z7GLT4sB86TzLJGgVyMjPN/T2UmTs7N4xH4B42fNT6fnfl8AT3p7XQfejY/z+7JlUfPAAB2OjpJj2xSMx3n8urNDt6NRim5tUT6fl7NnginJwJ5tU+7ggH9gwO7ooOWVFbrZ3U2L09MUDwbJdhyKhkI0l8vxOwTvucNDaspkzgRSkgEBAC0AkIxEWKGm2MUS1sMNDRSwLDUPwJ37+75AvABwjB/29LDnALGVStFGMqmUJocjVFV5xWU8lz+kpn7lMU3W1ChGFo6O6F4sRpHVVckjddYE4KQbG6kulaK+ri7eNDYzwyOM6mICMDOsLpHiKegTQb5Y8/MuEDoAhxNscJCqhoZc3pqGRblpND1yagyMcLj6MxSLxehzNktWIEBg40F5OaXTabat6jzT1kZT29tMG2ImHlfXt9JxdvOUsgqLIn2rFE0znUp26toIAMoi7Tzn/LZ5/LW3poAgLO1lZVTd2krN6+sMgutaXwBFYlxoDlRYSiGe/QBkxtoUAIDG3qPMAgOQHEGiAsCLxUV6ns+fMBCLxZy1RILCL1+6Yu0FAPsRAj8GguG4YgDPwh7AgA2EBCAKlcQMiHD26xmOQ14CBrwEDMAozsGwAEA48DMqxZUDCoQAgBKhHodFGZQsfD+ieEOQovUhmvuW42crfOJLuLaB9wr1evg0AMrxojL0YgAAhI3s/i73ALzjGYJ3KIdxAS7U62HA/kKv8AeATNa99+S6kOVSaqgUxLcmessFQEBIRZyLAall8Vj3oBQYrEkCyj6zfM/NABRJ4kCZgNHjKbVulqh4KyD0RMZaoYmVzgGJq65ET0idCQHrxY4JRkpYa4CqE7qqwAuAHkfZjOTTaZfm42VY8qr50UkHVM4ZyB390tFvN9NDvVz9+oKc0RP7XACkrAAAX0ZVoRBfydficR4/TE66GpZXZxTjuCN0sC2Pf5RmQKpASgbfhvgugGCstyx6OzFB28O1qlGdBcDU6ZsDlZWVDhSzscIHhjAgADC+n5r6fwCEAYRBRBiQCvC6HfUQXAoDoB8gMOILGXFF64X8M4Ab4y3OUu9GACFYfxPi3r6zd0DXn9qk/z+QcOD/gmS2APDrkpj3qCx3GQoAtHgo1j+nzBAIA0IrgOJWlLzRewjWcEtu7h6r2xJOFSUhAGB2qXejCC0A6AmIMJgMYP1O8A/v+5RJKzLs7MmfKLmq8Vx0G4pxAbD82qL7TVfpY/Inh0CvAtEMAKD1bqSOvhxkmTE8m4I1EZ1VFwM6AF0BcqJUXP3OlTpjrsEGGzFYOPP/nCi6DBDnNnYRzy6y9y9HbbU6yUzbiAAAAABJRU5ErkJgggAA\"","import houseSrc from \"../../img/house.png\"\r\nimport Entity from \"../Entity\"\r\nimport Gift from \"./Gift\"\r\n\r\nexport type PathConfig = {\r\n  size?: number\r\n}\r\n\r\nexport default class House extends Entity {\r\n  #gifts:Gift[] = []\r\n\r\n  constructor( x:number, y:number, { size = 1.5 }:PathConfig = {} ) {\r\n    super( x, y, { size, spriteSrc:houseSrc } )\r\n  }\r\n\r\n  pushGift = (gift:Gift) => {\r\n    this.#gifts.push( gift )\r\n  }\r\n\r\n  tick = () => {}\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2W7wmAIBDFz8ZpB6FFa4GWCNqhdYoTCwv1/C+kfgoy73fvXvjYuvATKi6mA2AAUIpKC/AVJCeQE4BtQtt+wMTH4CG+AHw7jS2O1A+AqbgvlK8UAqBacVUBX/JU+58RpJhnCNTLhDUgon9DqmuqqewAFGAH6ApkU4By/21OEsD1IMrtpvckQOjBrt91gIYVwNQ7yESETscVk+2sppPFRNRWn0UgmfmJJEVyOBbH+KWshj0gVWhbAbRDEgVi7ot/ALhePLp9F13HfMS22AqGAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAUdJREFUWEftlr8KwjAQxlOnjh37DM6OVhREEERwdPHNVHARVBDESQQFV2efo2O3yhfa0tS2yfVfBhsoLfS4++W7y+WM48bxmcZlpAEYjLGmqFIBkoLUCaQEkJeh5+vDhk63cBIFAOpOywYHdQSQFZwKRZWCA2gLHleASl6VfZSCKvJZBEooQh0QpY+hbNeyTdUOIANsAf5TgfHiwu7nOS+P2hTIqv7Z8sYDX/cTNQDZMZJVefJ/b7Rjtm2rA1ADUO1rS4EqSAugTwFMvZ3gGKLSscrMdrk5D4LxUTv+zfvA2vFB0sgcjuAYv2JLXwoCiFQAtErXdYWGoXqsqHYCALqUZVnch+d5HOC0HVB9kuwFgP70wEzT5A7whgoACvs2ybOCMcohFSCEgApY4c2V5bPMffFTA1AhVAAAeN6PVe5+KgVQUK5Sky+Or6bEQU31dwAAAABJRU5ErkJgggAA\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAeNJREFUWEfllz9LxEAQxTdiEbRJcUjK1GJpIxhREMFGULQWBRsRrPwyigoWFv4FO0FEtPMD2BqswmGRwiLdyVsyYZLb3dwmeldk4UjuNtn325k3y5xzfRb2xAiHowJwhBDDolIClAPyn0ADAZgy9PL2IRbD6dpJLADY7rSpOKhzAJ24LZRtKCSArfjs0oXU8TxPPN2v2Wrmz0PXygObO68iiiIp7LquSJJEXvEd4+Z8wRomBzDl8/PrR+wdPkuxNE1zERKO41j+5vu+NUQhAioI7Bqi2C0EcQ8Q1eBzgAqCoBJIm4KZueNCeEnUBAAomgcwInKw2zGWaR8A5RmC9CnvlkPQPaUGwtj5oJ7IAZDnre273GBYgEym2zUXL0eIgCgVumoxVgGiQRBYiER4ZFTRoFTgenmyIqY6as8UDiKVqbrfqdg/eu+b4pVAk9ykVB38RV2JWp0DfMHl9QetR8rEpvOhFgBSQ2GuqgqkqxGA7mwgb/Ddchgqw6pqqBUBLEpRgDkp52VDVhmw0oQ2B/v86lXBE/xAerzdEJMT48rlakfABs70bIsB0PWOZf0AnI7RpLczpiQTk602v5cNyWnYA8lQ+nCIow1io8UeyKLQ7ghYd8U6pzf5g/InKRg5QJNj+RfTySfTlUlN/gAAAABJRU5ErkJgggAA\"","import pathSrc from \"../../img/path.png\"\r\nimport snowPathSrc1 from \"../../img/path-1.png\"\r\nimport snowPathSrc2 from \"../../img/path-2.png\"\r\nimport Entity from \"../Entity\"\r\n\r\nconst pathSrcs = [ pathSrc, snowPathSrc1, snowPathSrc2 ]\r\nconst randPathSrc = () => {\r\n  const rand = Math.random()\r\n\r\n  if (rand > 0.90) return snowPathSrc2\r\n  if (rand > 0.60) return snowPathSrc1\r\n\r\n  return pathSrc\r\n}\r\n\r\nexport type PathConfig = {\r\n  size?: number\r\n}\r\n\r\nexport default class Path extends Entity {\r\n  constructor( x:number, y:number, { size = 1 }:PathConfig = {} ) {\r\n    super( x, y, { size, spriteSrc:randPathSrc() } )\r\n  }\r\n\r\n  tick = () => {}\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAqlJREFUWEfFlk+L00AYxp9pm7bZtkld6P5xBQUPuoI9WRTBU8FD754Ev4afxQ/gyUM/QUHwohYPenBZYUFd10tBkzTbTdpuRt5JJ1u6dTPTVnegMCTzvvOb533mTRlShlOrcWZZoB/3vGS1fXDA0mJV3v81CeecuxsbIsfJcDg317brLg1xIUAQBDBNk+1bFp8lyL2PoW7eDpaCUA6WpTA+9BKW9a0hguA/AQwcizNmi805d5HJ3gWPvsO0D5UPMa+OWsESggCu3siIfI7jaOWYhdAKDv0W7/uvYRqbQO43SvZymxOMMkC1WuU/v0YYDEZYWzNA5biy2SMPaOVZSIFiscg/5vOwGIOxF7t/tJuHx+PLceusPygfSIKoBvBupYJrmbjucvyIIjG953n4YtsSRDWniFVZLDan0+/6Po4qFRG40+9jr1wWc6kEgTAmUqrkVQfYtyyxeBbgXakkwOQgkEa/v3oAUoDG/ePjcwrI00sIXRVUpOKqChAEKbLtusoqKAGoeIA2JjX+mQKUPK0EBCE9oapCmgK8XSrhTjY714TyFtDLz6enYh0BbDmO8m1IBZAGJHfzSeNJmghjIH9MG1H2ipUpIOuflODlpA88jfsAPZf1lyVYqQKdcjnpgKIPzADIRkRdkUrwdjzGY8NQvgmpJSAAaSwyIY1o0oJJHakAeeAwimAzhge5nHJDSgV4XiiIk0mDScPRiae7ID2X9W/6fmKTsy/H/FkaAEWd+z+YlnTyXiW3+kdjalP+DcD1+IHSJhcBL5KAfwJQv0yANwAeXSbAVAmWLoNuCXiz0UCn28WzVgtHvZ6Y65hu1g/aAE+aTZiFAk7CECMA4zDETq2GF+32QiDaAA/rdaxbVgLxy/OSOYG86nS0yqINsMoeoEWquLH2sj+JYDkwm7dDLgAAAABJRU5ErkJgggAA\"","import Entity from \"./Entity\"\r\n\r\nexport type ThingInInventory = {\r\n  entities: Entity[]\r\n  name: string\r\n}\r\n\r\nexport class InventoryItem {\r\n  name:string\r\n  #entities:Entity[] = []\r\n\r\n\r\n  get count() {\r\n    return this.#entities.length\r\n  }\r\n\r\n\r\n  constructor( name ) {\r\n    this.name = name\r\n  }\r\n\r\n\r\n  push( entities:Entity[] ) {\r\n    this.#entities.push( ...entities )\r\n  }\r\n\r\n\r\n  pop( count ) {\r\n    return this.#entities.splice( -count )\r\n  }\r\n}\r\n\r\nexport default class Inventory {\r\n  #data:Record<string, InventoryItem> = {}\r\n\r\n  add( ...things:ThingInInventory[] ) {\r\n    const data = this.#data\r\n\r\n    things.forEach( ({ entities, name }) => {\r\n      if (!(name in data)) {\r\n        data[ name ] = new InventoryItem(name)\r\n      }\r\n\r\n      data[ name ].push( entities )\r\n    } )\r\n  }\r\n\r\n\r\n  remove = (name:string, count:number = 1) => {\r\n    return this.#data[ name ].pop( count )\r\n  }\r\n\r\n\r\n  getData = () => Object.values( this.#data )\r\n}\r\n","import Entity from \"./Entity\"\r\n\r\nexport class Void extends Entity {}\r\nexport default class LevelCell {\r\n  #data:Entity[] = []\r\n  x:number\r\n  y:number\r\n\r\n\r\n  constructor( x:number, y:number, entities:Entity[] ) {\r\n    this.#data = entities\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n\r\n  getData() {\r\n    return [ ...this.#data ]\r\n  }\r\n\r\n\r\n  put( entity:Entity ) {\r\n    if (entity) this.#data.push( entity )\r\n  }\r\n\r\n\r\n  top() {\r\n    return this.#data[ this.#data.length - 1 ] ?? new Void( this.x, this.y )\r\n  }\r\n\r\n\r\n  forEach( callback:(item:Entity|null, layer:number) => void ) {\r\n    this.#data.forEach( (item, itemIdx) => callback( item, itemIdx ) )\r\n  }\r\n\r\n  take() {\r\n    return this.#data.pop() ?? null\r\n  }\r\n}\r\n","import Entity, { EntityConfig } from \"./Entity\"\r\nimport Inventory, { ThingInInventory } from \"./Inventory\"\r\nimport { Void } from \"./LevelCell\"\r\n\r\nexport enum ObstacleType { WALL, AIR }\r\nexport type Obstacle = { type:ObstacleType, tileType:(typeof Entity)}\r\nexport type MovingEntityConfig = EntityConfig & {\r\n  cantMoveOn?: (typeof Entity | Obstacle)[]\r\n}\r\n\r\nexport default class MovingEntity extends Entity {\r\n  #inventory = new Inventory()\r\n  speed = 0.2\r\n  cantMoveOn:Obstacle[] = [ { type:ObstacleType.WALL, tileType:Void } ]\r\n\r\n  constructor( x:number, y:number, { cantMoveOn = [], labels, size, keyBinds, spriteSrc, framesPerRow, framesPerColumn, framesCount }:MovingEntityConfig ) {\r\n    super( x, y, { labels, size, keyBinds, spriteSrc, framesPerRow, framesPerColumn, framesCount } )\r\n\r\n    const standarizedCanMoveOn = cantMoveOn.map( o => `type` in o && `tileType` in o ? o : { type:ObstacleType.WALL, tileType:o } )\r\n    this.cantMoveOn.push( ...standarizedCanMoveOn )\r\n  }\r\n\r\n\r\n  setSpeed = (newSpeed:number) => this.speed = newSpeed\r\n\r\n\r\n  getInventory = () => this.#inventory.getData()\r\n  addToInventory = (...things:ThingInInventory[]) => {\r\n    this.#inventory.add( ...things )\r\n  }\r\n  removeFromInventory = (name:string, count = 1) => this.#inventory.remove( name, count )\r\n  takeFromWorld = () => {\r\n    const pos = this.getTilePos()\r\n    return this.getWorld()?.takeFromTop( pos.x, pos.y )\r\n  }\r\n\r\n\r\n  goUp = (speed = this.speed) => {\r\n    this.setAngle( 90 )\r\n    this.go( speed )\r\n  }\r\n  goDown = (speed = this.speed) => {\r\n    this.setAngle( 270 )\r\n    this.go( speed )\r\n  }\r\n  goRight = (speed = this.speed) => {\r\n    this.setAngle( 0 )\r\n    this.go( speed )\r\n  }\r\n  goLeft = (speed = this.speed) => {\r\n    this.setAngle( 180 )\r\n    this.go( speed )\r\n  }\r\n  go = (speed = this.speed) => {\r\n    const coords = this.getTilePos()\r\n    const nextX = this.x + Math.cos( this.angle ) * speed\r\n    const nextY = this.y - Math.sin( this.angle ) * speed\r\n    const signX = Math.sign( nextX - this.x )\r\n    const signY = Math.sign( nextY - this.y )\r\n    const nextCoords = this.getTilePos( nextX, nextY )\r\n    const world = this.getWorld()\r\n\r\n    const getCellSizes = (x, y) => world.getCell( x, y ).top()\r\n    const tilesToCheck = [ getCellSizes( nextCoords.x, nextCoords.y ) ]\r\n\r\n    if (nextX != this.x) {\r\n      tilesToCheck.push(\r\n        getCellSizes( coords.x + signX, coords.y - 1 ),\r\n        getCellSizes( coords.x + signX, coords.y + 0 ),\r\n        getCellSizes( coords.x + signX, coords.y + 1 ),\r\n      )\r\n    }\r\n    if (nextY != this.y) {\r\n      tilesToCheck.push(\r\n        getCellSizes( coords.x - 1, coords.y + signY ),\r\n        getCellSizes( coords.x + 0, coords.y + signY ),\r\n        getCellSizes( coords.x + 1, coords.y + signY ),\r\n      )\r\n    }\r\n\r\n    const collision = tilesToCheck.some( t => {\r\n      const obstacle = this.cantMoveOn.find( o => t instanceof o.tileType )\r\n\r\n      if (!obstacle) return false\r\n\r\n      switch (obstacle.type) {\r\n        case ObstacleType.AIR: return nextCoords.x === t.x && nextCoords.y === t.y\r\n        case ObstacleType.WALL: return MovingEntity.checkCollisionAABB( { x:nextX, y:nextY, w:this.w * 0.9, h:this.h * 0.9 }, t )\r\n      }\r\n    } )\r\n\r\n    if (collision) return\r\n\r\n    this.x = nextX\r\n    this.y = nextY\r\n  }\r\n\r\n\r\n  tick = (tFrame:number):void => {\r\n    tFrame\r\n    throw new Error( `You should override method \"tick\"` )\r\n  }\r\n\r\n\r\n  static checkCollisionAABB( a:{x:number, y:number, w:number, h:number}, b:{x:number, y:number, w:number, h:number} ) {\r\n    const aMinX = a.x - a.w / 2\r\n    const aMinY = a.y - a.h / 2\r\n\r\n    const bMinX = b.x - b.w / 2\r\n    const bMinH = b.y - b.h / 2\r\n\r\n    return true\r\n      &&  aMinX < bMinX + b.w && aMinX + a.w > bMinX\r\n      &&  aMinY < bMinH + b.h && aMinY + a.h > bMinH\r\n  }\r\n}\r\n","import Gift from \"./Gift\"\r\n// import playerSrc from \"../../img/player.png\"\r\nimport santaSrc from \"../../img/santa.png\"\r\nimport frostSrc from \"../../img/frost.png\"\r\nimport MovingEntity from \"../MovingEntity\"\r\nimport Path from \"./Path\"\r\nimport House from \"./House\"\r\n\r\nconst characterType = Math.random() > 0.5 ? `santa` : `frost`\r\nexport type PlayerConfig = {\r\n  speed?: number,\r\n  size?: number\r\n}\r\n\r\nexport default class Player extends MovingEntity {\r\n  score = 0\r\n\r\n\r\n  constructor( x:number, y:number, { speed = 0.2, size }:PlayerConfig = {} ) {\r\n    // super( x, y, { cantMoveOn:[], labels:[ `player` ], size, spriteSrc:playerSrc, framesPerRow:2, framesPerColumn:3 } )\r\n    super( x, y, { cantMoveOn:[], labels:[ `player` ], size, spriteSrc:characterType === `frost` ? frostSrc : santaSrc } )\r\n\r\n    if (speed) this.setSpeed( speed )\r\n  }\r\n\r\n\r\n  tick = (delta:number) => {\r\n    this.nextFrame()\r\n    this.move( delta )\r\n\r\n    if (this.isKeyOnce( `q` )) {\r\n      const thing = this.getThingImOn()\r\n\r\n      if (thing instanceof Gift) {\r\n        this.addToInventory({\r\n          name: `Prezent`,\r\n          entities: [ this.takeFromWorld() ],\r\n        })\r\n      } else if (thing instanceof House) {\r\n        const [ gift ] =  this.removeFromInventory( `Prezent` ) as Gift[]\r\n\r\n        if (gift) {\r\n          thing.pushGift( gift )\r\n          this.score += 10\r\n\r\n\r\n          const savedPoints = Number( localStorage.getItem( characterType ) ) ?? 0\r\n          localStorage.setItem( characterType, `${this.score + savedPoints}` )\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  move = (delta:number) => {\r\n    const dirs = {\r\n      left: this.isKey( `leftDirection` ),\r\n      right: this.isKey( `rightDirection` ),\r\n      up: this.isKey( `upDirection` ),\r\n      down: this.isKey( `downDirection` ),\r\n    }\r\n\r\n    let shouldGo = false\r\n\r\n    const setAngle = angle => {\r\n      shouldGo = true\r\n      this.setAngle( angle )\r\n    }\r\n\r\n    if (dirs.up) {\r\n      if (dirs.right) setAngle( 45 )\r\n      else if (dirs.left) setAngle( 125 )\r\n      else setAngle( 90 )\r\n    } else if (dirs.down) {\r\n      if (dirs.right) setAngle( -45 )\r\n      else if (dirs.left) setAngle( -125 )\r\n      else setAngle( -90 )\r\n    } else if (dirs.left) {\r\n      setAngle( 180 )\r\n    } else if (dirs.right) {\r\n      setAngle( 0 )\r\n    }\r\n\r\n    if (shouldGo) this.go( this.speed * delta )\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA6tJREFUWEfFlstrE1EUxr9pm2Ym7WRStUkai1bTEFoRtFp8goouVFQQRBeiC12JCIIrEdyJf4EIggo+ViIuFN+lFqxUtC1aqNYy1EeVxHYxSZtH0ebKOXRK1GruJEUvDJnJ3HvO73znnHtHQYERsEwx05S4L6wUWivz/o9GMpmMCAy/huLVIZJj/GsP+zkRaC4Z4o8GhBDCsizU1NQo3sHnggAm+wdQVh9ioKHgLlRVz4VmfCoJQnqxEe8XueEvGIkcZyFyuY8INZTBsixpGzOlRHqx+VYVhl4G3diIsWQ7qvUW5Cb74PElpW2UBECLR79oQtdbIEQCwQXDFD39/e8A0pZXKIqBVGoUHo+r5Ogd0ft8PtHdlcX8UCPnP53+hnmhjK1q0SrILhTewefcinFtL6egQTxB4vwluA/tRyLQXDSINIAR74df1ZAUOXaWGRnldqS2tPxN8Pa0oXzzHsddURCApHe/70Z2YgLlTesx+eYpVLcbI3MiqHrxkFXRaudhvKMT47sOQFHYZEG70pKpqipcnXfYUcWqbT8BeNpuorw5ykCp3teoa1mGQWPR7AIA4PzTaNx3BOa9a9MK5AOkzSEEG8N4521wpIKMVNMFOHfNDqR6HjGMnQKqAVuB6IoWDMZjSEZWSasgBRBJDOFrNoOq5VuQ6n3MxUhS692P+XzQd27loqRaeCvm0PkxuwABy4RXKcPnuiWoeNWOgN/PANQZ1AnkmACoTkgNKtip1iwY4F8nUAFW9nWw5JFAEG+CTXANveRnJboWYuAZ6ICyT0gCofHeHYKmaVIqFARwf+hhmf2HT8A0TXZAZ4DP5+NiowIlFTzhRawS7ROkhmwdSAGQA1sB86ILybRA9HASlBoaY7fvcx2Q9JSCmLFYuhP+CkCbUO7FA85xc3klOoyF+Hxdx/BoDq3HxrgISf7vXS9RsXolw+R9LZWegvxdkKzl7fnszHP1HDumFFEBEow9ZiUFBPD91mU2bH+S0c5HUdJFw3ZKKlRvWJffAaUrMBWNCAaDXHjZbHY6QvtGVVW+pXd0nzenYAtKEf7mERAkffrA0WLX/2RSivIXCEEbkOxGM0MApQNUt9/C+Kbd/08B9ewpZE+esSMpRsVpFZwuFsujUfQODODg9u3ITEzgRlsbqEhjsZhTWwzhdJHY3NqK+bW17PwbABeApeEwTl+4UJQijgEW1tWxQ83tZgi6aNBvY309rty96ygwxwCFqnrqvbRd6YmSjh1P+wGZ/okw2xUmaAAAAABJRU5ErkJgggAA\"","import LevelCell from \"./LevelCell\"\r\nimport MovingEntity from \"./MovingEntity\"\r\nimport Entity from \"./Entity\"\r\nimport Game from \"./Game\"\r\n\r\nexport type SymbolDefinitions = Record<string, (x:number, y:number) => (Entity|MovingEntity|Entity[])>\r\nexport type Board = (string | string[])[][]\r\nexport type LevelConfig = {\r\n  symbolDefs: SymbolDefinitions\r\n  board: Board\r\n  tileSize?: number\r\n  script: (level:Level) => void\r\n}\r\n\r\nexport default class Level {\r\n  game:Game\r\n  entities:MovingEntity[] = []\r\n  tileSize = 32\r\n\r\n  #script:(level:Level) => void\r\n  #width:number\r\n  #height:number\r\n  #data:LevelCell[][]\r\n\r\n\r\n  get width() {\r\n    return this.#width\r\n  }\r\n  get height() {\r\n    return this.#height\r\n  }\r\n\r\n\r\n  constructor({ script, symbolDefs, board:boardLike, tileSize = 32 }:LevelConfig) {\r\n    this.#width = 0\r\n    this.#height = 0\r\n    this.tileSize = tileSize\r\n    this.#script = script\r\n\r\n    this.#data = boardLike.map( (row, y) => {\r\n\r\n      const normalizedRow = row.reduce<( string | string[])[]>( (arr, strOrStack) => {\r\n        if (typeof strOrStack === `string`) return [ ...arr, ...strOrStack.split( `` ) ]\r\n        else return [ ...arr, strOrStack ]\r\n      }, [] )\r\n\r\n      if (normalizedRow.length > this.#width) this.#width = normalizedRow.length\r\n\r\n      return normalizedRow.map( (strOrStack, x) => {\r\n        const symbolsStack = Array.isArray( strOrStack ) ? strOrStack : [ strOrStack ]\r\n        const cellData = symbolsStack.flatMap( symbols => symbols.split( `` ).map( symbol => {\r\n          const entityOrArr = symbol in symbolDefs ? symbolDefs[ symbol ]( x, y ) : null\r\n          const entitiesArr = Array.isArray( entityOrArr ) ? entityOrArr : [ entityOrArr ]\r\n\r\n          return entitiesArr.map( e => this.#configureEntity( e ) )\r\n        } ) ).flat().filter( item => item !== undefined )\r\n\r\n        return new LevelCell(x, y, cellData)\r\n      } )\r\n    } )\r\n\r\n    if (this.#data.length > this.#height) this.#height = this.#data.length\r\n\r\n    // this.#generatelevel( this.#width, this.#height )\r\n  }\r\n\r\n\r\n  setGame = (game:Game) => {\r\n    this.game = game\r\n  }\r\n\r\n\r\n  #configureEntity = (entity:Entity) => {\r\n    if (typeof entity?.setExistingWorld === `function`) entity?.setExistingWorld( this )\r\n\r\n    if (entity instanceof MovingEntity) {\r\n      this.entities.push( entity )\r\n      return undefined\r\n    }\r\n\r\n    return entity\r\n  }\r\n\r\n\r\n  runScript = () => this.#script( this )\r\n\r\n\r\n  // #generatelevel( width:number, height:number ) {\r\n  //   const cellFiller = () => new LevelCell()\r\n\r\n  //   this.#data = Array.from( { length:height }, () => Array.from( { length:width }, cellFiller ) )\r\n  // }\r\n\r\n\r\n  getCell( tileX:number, tileY:number, isStrict = false ) {\r\n    const cell = this.#data[ tileY ]?.[ tileX ]\r\n\r\n    if (cell || isStrict) return cell\r\n    if (!this.#data[ tileY ]) this.#data[ tileY ] = []\r\n\r\n    const newCell = new LevelCell(tileX, tileY, [])\r\n\r\n    this.#data[ tileY ][ tileX ] = newCell\r\n\r\n    return newCell\r\n  }\r\n\r\n\r\n  // putOnCell( x:number, y:number, item:Tile ) {\r\n  //   this.entities.push( item )\r\n  //   this.getCell( x, y )?.put( item )\r\n  // }\r\n\r\n\r\n  forEach( callback:(cell:LevelCell, x:number, y:number)=>void ) {\r\n    this.#data.forEach( (row, rowIdx) => row.forEach( (cell, columnIdx) => callback( cell, columnIdx, rowIdx ) ) )\r\n  }\r\n\r\n\r\n  getEntities( label?:string ) {\r\n    if (label) return this.entities.filter( e => e.labels.some( l => l === label ) )\r\n\r\n    return this.entities\r\n  }\r\n\r\n\r\n  takeFromTop( tileX, tileY ) {\r\n    return this.#data[ tileY ]?.[ tileX ]?.take() ?? null\r\n  }\r\n\r\n\r\n  spawn = (entity:Entity) => {\r\n    const { x, y } = entity.getTilePos()\r\n\r\n    this.#configureEntity( entity )\r\n    this.getCell( x, y ).put( entity )\r\n\r\n    return entity\r\n  }\r\n}\r\n","import Gift from \"../entities/Gift\"\r\nimport House from \"../entities/House\"\r\nimport Path from \"../entities/Path\"\r\nimport Player from \"../entities/Player\"\r\nimport Level from \"../Level\"\r\nimport LevelCell from \"../LevelCell\"\r\n\r\n\r\nexport default new Level({\r\n  symbolDefs: {\r\n    X: (x, y) => null,\r\n    \" \": (x, y) => new Path(x, y),\r\n    g: (x, y) => new Gift(x, y),\r\n    P: (x, y) => new Player(x, y),\r\n    H: (x, y) => [ new Path(x, y), new House(x, y) ],\r\n  },\r\n  board: [\r\n    [ `        XX` ],\r\n    [ `          ` ],\r\n    [ `          ` ],\r\n    [ `          ` ],\r\n    [ `          ` ],\r\n    [ ` H        ` ],\r\n    [ `          ` ],\r\n    [ `          ` ],\r\n    [ `X      X  ` ],\r\n    [ `XX        ` ],\r\n  ],\r\n  async script( level ) {\r\n    const player = level.spawn( new Player( 1, 1 ) )\r\n    const rand = () => Math.floor( Math.random() * 10 )\r\n    const sleep = (ms = 1000) => new Promise( r => setTimeout( r, ms ) )\r\n\r\n    level.game.setActiveEntity( player )\r\n\r\n    // level.spawn( new Path( 3, 1 ) )\r\n    // level.spawn( new Path( 4, 1 ) )\r\n\r\n    while (true) {\r\n      let cell:LevelCell\r\n\r\n      for (let i = 0, found = false;  i < 10 && !found;  ++i) {\r\n        const maybeCell = level.getCell( rand(), rand(), true )\r\n\r\n        if (maybeCell.getData().filter( c => c instanceof Path ).length === 1) {\r\n          cell = maybeCell\r\n          break\r\n        }\r\n      }\r\n\r\n      if (cell) {\r\n        level.spawn( new Gift( cell.x, cell.y ) )\r\n      }\r\n\r\n      await sleep( 1000 * 5 )\r\n    }\r\n  },\r\n})\r\n","import Painter from \"./Painter\"\r\n\r\nimport level1 from \"./levels/1\"\r\nimport Keys from \"./Keys\"\r\nimport Level from \"./Level\"\r\nimport Entity from \"./Entity\"\r\nimport getWindow from \"../../../core/functions/getWindow\"\r\n\r\nexport default class Game {\r\n  #mainLoopAnimationId:number\r\n  #framesIntervalId:number\r\n\r\n  #painter = new Painter()\r\n  #keys = new Keys()\r\n  #lastTick = performance.now()\r\n  #lastRender = this.#lastTick\r\n  #tickLength = 50\r\n\r\n  activeEntity:Entity\r\n  level:Level\r\n\r\n\r\n  constructor() {\r\n    this.startLevel()\r\n    this.startLoop()\r\n  }\r\n\r\n  setCanvas = (canvas:HTMLCanvasElement, layer = 0) => {\r\n    this.#painter.setCanvas( canvas, layer )\r\n  }\r\n\r\n\r\n  #loop = (timestamp = 0) => {\r\n    this.#mainLoopAnimationId = getWindow()?.requestAnimationFrame( this.#loop )\r\n\r\n    const lastTick = this.#lastTick\r\n    const tickLength = this.#tickLength\r\n\r\n    const nextTick = lastTick + tickLength\r\n    let numTicks = 0\r\n\r\n    if (timestamp > nextTick) {\r\n      const timeSinceTick = timestamp - lastTick\r\n      numTicks = Math.floor( timeSinceTick / tickLength )\r\n    }\r\n\r\n    for (var i = 0;  i < numTicks;  i++) {\r\n      this.#lastTick += tickLength\r\n      this.updateLogic( 1 - Math.floor( (timestamp - this.#lastTick) / 1000 ) )\r\n    }\r\n\r\n    this.render()\r\n  }\r\n\r\n\r\n  startLevel = () => {\r\n    this.level = level1\r\n    this.level.setGame( this )\r\n    this.level.runScript()\r\n  }\r\n\r\n\r\n  setActiveEntity = (entity:Entity) => {\r\n    this.activeEntity = entity\r\n  }\r\n\r\n\r\n  startLoop = () => {\r\n    this.#mainLoopAnimationId = getWindow()?.requestAnimationFrame( this.#loop )\r\n  }\r\n\r\n\r\n  stopLoop = () => {\r\n    getWindow()?.cancelAnimationFrame( this.#mainLoopAnimationId )\r\n    getWindow()?.clearInterval( this.#framesIntervalId )\r\n  }\r\n\r\n\r\n  updateLogic = delta => {\r\n    if (!this.level) return\r\n\r\n    const entities = this.level.getEntities()\r\n\r\n    entities.forEach( e => e.tick( delta ) )\r\n  }\r\n\r\n\r\n  render = () => {\r\n    if (!this.level) return\r\n\r\n    this.#painter.drawLevel( this.level )\r\n  }\r\n\r\n\r\n  close = () => {\r\n    this.stopLoop()\r\n    this.#painter.destroy()\r\n  }\r\n}\r\n","import React from \"react\"\r\nimport { InventoryItem } from \"../logic/Inventory\"\r\n\r\nexport type InventoryProps = {\r\n  items:InventoryItem[]\r\n}\r\n\r\nexport default function Inventory({ items }:InventoryProps) {\r\n  return (\r\n    <ul>\r\n      {\r\n        items.map( ({ count, name }) => (\r\n          <li key={name} style={{ marginLeft:20 }}>{name}: {count}</li>\r\n        ) )\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\"\r\nimport getWindow from \"../../../core/functions/getWindow\"\r\nimport Player from \"../logic/entities/Player\"\r\nimport Game from \"../logic/Game\"\r\nimport MovingEntity from \"../logic/MovingEntity\"\r\nimport Inventory from \"./Inventory\"\r\n\r\nexport type userInterfaceProps = {\r\n  game:Game\r\n}\r\n\r\nexport default function UserInterface({ game }:userInterfaceProps) {\r\n  const [ , setLastUpdate ] = useState( 0 )\r\n  const intervalIdRef = useRef<number>( null )\r\n  const { activeEntity } = game\r\n\r\n\r\n  useEffect( () => {\r\n    intervalIdRef.current = getWindow()?.setInterval( () => setLastUpdate( Date.now() ), 100 )\r\n    return () => getWindow()?.clearInterval( intervalIdRef.current )\r\n  } )\r\n\r\n\r\n  if (!activeEntity) return null\r\n\r\n\r\n  return (\r\n    <ul style={{ margin:10 }}>\r\n      <li>Klikajc \"q\" podnosisz prezent oraz przekazujesz go do domu</li>\r\n      <li />\r\n      {activeEntity instanceof Player && <li>Punkty: {activeEntity.score}</li>}\r\n      <li>Punkty Mikoaja: {getWindow()?.localStorage.getItem( `santa` ) ?? 0}</li>\r\n      <li>Punkty Mroza: {getWindow()?.localStorage.getItem( `frost` ) ?? 0}</li>\r\n      <li />\r\n      {activeEntity instanceof MovingEntity && <li>Zawarto kieszeni: <Inventory items={activeEntity.getInventory()} /> </li>}\r\n    </ul>\r\n  )\r\n}\r\n","import React, { useEffect, useRef } from \"react\"\r\nimport * as classes from \"./game.module.css\"\r\nimport GameCore from \"./logic/Game\"\r\nimport { ThingInInventory } from \"./logic/Inventory\"\r\nimport UserInterface from \"./ui/index\"\r\n\r\n\r\nexport type EntityData = {\r\n  x: number\r\n  y: number\r\n  inventory?: ThingInInventory[]\r\n}\r\n\r\n\r\nexport default function Game() {\r\n  const gameRef = useRef( new GameCore() )\r\n  const handleCanvasRef1 = c => c && gameRef.current.setCanvas( c, 0 )\r\n  const handleCanvasRef2 = c => c && gameRef.current.setCanvas( c, 1 )\r\n\r\n\r\n  useEffect( () => gameRef.current.close )\r\n\r\n\r\n  return (\r\n    <article className={classes.game}>\r\n      <canvas className={classes.mainCanvas} ref={handleCanvasRef1} />\r\n      <canvas className={classes.mainCanvas} ref={handleCanvasRef2} />\r\n      <UserInterface game={gameRef.current} />\r\n    </article>\r\n  )\r\n}\r\n","import React from \"react\"\r\nimport Game from \"../components/game\"\r\nimport composePage from \"../core/functions/composePage\"\r\nimport MainLayout from \"../core/layouts/main\"\r\n\r\nfunction GamePage() {\r\n  return <Game />\r\n}\r\n\r\nexport default composePage({\r\n  component: GamePage,\r\n  layout: MainLayout,\r\n})\r\n"],"names":["composePage","_ref","component","Component","layout","Layout","React","MainLayout","children","mainCanvas","_classPrivateFieldBase","e","t","hasOwnProperty","call","TypeError","id","_classPrivateFieldKey","getWindow","window","Mode","_ctxs","_classPrivateFieldLooseKey","_entitiesCtx","_getEntitiesCtx","_getBestCtx","_resize","Painter","constructor","_getWindow2","_this","Object","defineProperty","writable","value","setCanvas","canvas","layer","_classPrivateFieldLooseBase","getContext","this","length","forEach","ctx","width","clientWidth","height","clientHeight","destroy","_getWindow","removeEventListener","addEventListener","clear","clearer","clearRect","drawLevel","level","_temp","mode","CENTER","tileSize","ctxs","eCtx","save","translate","cell","tile","draw","entities","restore","_data","_timeOfusedKeys","Keys","binds","notSimplifiedBinds","concatenatedBinds","predefinedBinds","bindName","map","b","code","result","is","active","isOnce","times","updatedAt","_Keys","controls","leftDirection","rightDirection","upDirection","downDirection","_state","data","test","toUpperCase","includes","charAt","slice","state","bind","find","_data$code","onKeyDown","_ref2","_classPrivateFieldLoo","Date","now","onKeyUp","_ref3","Sprite","src","framesPerRow","framesPerColumn","framesCount","_framesCount","_framesPerRow","_framesPerColumn","_spreadsheet","_currentFrame","_frameWidth","_frameheight","getWidth","getHeight","nextFrame","x","y","sprite","frameW","frameH","frameX","frameY","Math","floor","drawImage","Image","_sprite","_world","Entity","_x","_y","labels","size","keyBinds","spriteSrc","setAngle","angle","PI","setExistingWorld","world","isKey","keys","isKeyOnce","getWorld","getTilePos","w","h","getThingImOn","_classPrivateFieldLoo2","pos","getCell","top","_classPrivateFieldLoo3","widthOnTile","heightOnTile","halfW","halfH","rotate","tick","tFrame","setSize","Gift","super","_gifts","House","pushGift","gift","push","randPathSrc","rand","random","snowPathSrc2","snowPathSrc1","pathSrc","Path","InventoryItem","count","_entities","name","pop","splice","Inventory","remove","getData","values","add","_len","arguments","things","Array","_key","Void","LevelCell","put","entity","callback","item","itemIdx","take","ObstacleType","_inventory","MovingEntity","cantMoveOn","speed","type","WALL","tileType","setSpeed","newSpeed","getInventory","addToInventory","removeFromInventory","takeFromWorld","_this$getWorld","takeFromTop","goUp","go","goDown","goRight","goLeft","coords","nextX","cos","nextY","sin","signX","sign","signY","nextCoords","getCellSizes","tilesToCheck","some","obstacle","o","AIR","checkCollisionAABB","Error","standarizedCanMoveOn","a","aMinX","aMinY","bMinX","bMinH","characterType","Player","score","delta","move","thing","_Number","savedPoints","Number","localStorage","getItem","setItem","dirs","shouldGo","_script","_width","_height","_configureEntity","script","symbolDefs","board","boardLike","setGame","game","runScript","spawn","row","normalizedRow","reduce","arr","strOrStack","split","cellData","isArray","flatMap","symbols","symbol","entityOrArr","flat","filter","undefined","tileX","tileY","isStrict","newCell","rowIdx","columnIdx","getEntities","label","l","_classPrivateFieldLoo4","X"," ","g","P","H","player","sleep","ms","Promise","r","setTimeout","setActiveEntity","i","found","maybeCell","c","_mainLoopAnimationId","_framesIntervalId","_painter","_keys","_lastTick","_lastRender","_tickLength","_loop","Game","performance","timestamp","requestAnimationFrame","lastTick","tickLength","numTicks","timeSinceTick","updateLogic","render","startLevel","level1","activeEntity","startLoop","stopLoop","_getWindow3","_getWindow4","cancelAnimationFrame","clearInterval","close","items","key","style","marginLeft","UserInterface","_getWindow$localStora","_getWindow$localStora2","setLastUpdate","useState","intervalIdRef","useRef","useEffect","current","setInterval","margin","gameRef","GameCore","className","classes","ref"],"sourceRoot":""}